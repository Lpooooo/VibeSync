{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:3000/api/auth';\nexport const login = async (email, password) => {\n  const response = await axios.post(`${API_URL}/login`, {\n    email,\n    password\n  });\n  if (response.data.token) {\n    localStorage.setItem('token', response.data.token);\n    localStorage.setItem('user', JSON.stringify(response.data.user));\n  }\n  return response.data;\n};\nexport const register = async (name, email, password, nom_famille) => {\n  try {\n    const response = await axios.post(`${API_URL}/register`, {\n      name,\n      email,\n      password,\n      nom_famille\n    });\n    console.log('Response from register API:', response.data); // Ajoutez ce log\n    if (response.data.token) {\n      localStorage.setItem('token', response.data.token);\n      localStorage.setItem('user', JSON.stringify(response.data.user));\n    }\n    return response.data;\n  } catch (error) {\n    var _error$response;\n    console.error('Error during registration:', ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message); // Ajoutez ce log\n    throw error;\n  }\n};\nexport const logout = () => {\n  localStorage.removeItem('token');\n  localStorage.removeItem('user');\n};\nexport const getCurrentUser = () => {\n  const userStr = localStorage.getItem('user');\n  if (userStr) return JSON.parse(userStr);\n  return null;\n};\nexport const authHeader = () => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    return {\n      Authorization: `Bearer ${token}`\n    };\n  }\n  return {};\n};","map":{"version":3,"names":["axios","API_URL","login","email","password","response","post","data","token","localStorage","setItem","JSON","stringify","user","register","name","nom_famille","console","log","error","_error$response","message","logout","removeItem","getCurrentUser","userStr","getItem","parse","authHeader","Authorization"],"sources":["C:/Users/luchi/VibeSync/src/Services/auth.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:3000/api/auth';\r\n\r\nexport const login = async (email, password) => {\r\n    const response = await axios.post(`${API_URL}/login`, { email, password });\r\n    if (response.data.token) {\r\n        localStorage.setItem('token', response.data.token);\r\n        localStorage.setItem('user', JSON.stringify(response.data.user));\r\n    }\r\n    return response.data;\r\n};\r\n\r\nexport const register = async (name, email, password, nom_famille) => {\r\n    try {\r\n        const response = await axios.post(`${API_URL}/register`, {\r\n            name,\r\n            email,\r\n            password,\r\n            nom_famille\r\n        });\r\n        console.log('Response from register API:', response.data); // Ajoutez ce log\r\n        if (response.data.token) {\r\n            localStorage.setItem('token', response.data.token);\r\n            localStorage.setItem('user', JSON.stringify(response.data.user));\r\n        }\r\n        return response.data;\r\n    } catch (error) {\r\n        console.error('Error during registration:', error.response?.data || error.message); // Ajoutez ce log\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const logout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n};\r\n\r\nexport const getCurrentUser = () => {\r\n    const userStr = localStorage.getItem('user');\r\n    if (userStr) return JSON.parse(userStr);\r\n    return null;\r\n};\r\n\r\nexport const authHeader = () => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n        return { Authorization: `Bearer ${token}` };\r\n    }\r\n    return {};\r\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAG,gCAAgC;AAEhD,OAAO,MAAMC,KAAK,GAAG,MAAAA,CAAOC,KAAK,EAAEC,QAAQ,KAAK;EAC5C,MAAMC,QAAQ,GAAG,MAAML,KAAK,CAACM,IAAI,CAAC,GAAGL,OAAO,QAAQ,EAAE;IAAEE,KAAK;IAAEC;EAAS,CAAC,CAAC;EAC1E,IAAIC,QAAQ,CAACE,IAAI,CAACC,KAAK,EAAE;IACrBC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,QAAQ,CAACE,IAAI,CAACC,KAAK,CAAC;IAClDC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACP,QAAQ,CAACE,IAAI,CAACM,IAAI,CAAC,CAAC;EACpE;EACA,OAAOR,QAAQ,CAACE,IAAI;AACxB,CAAC;AAED,OAAO,MAAMO,QAAQ,GAAG,MAAAA,CAAOC,IAAI,EAAEZ,KAAK,EAAEC,QAAQ,EAAEY,WAAW,KAAK;EAClE,IAAI;IACA,MAAMX,QAAQ,GAAG,MAAML,KAAK,CAACM,IAAI,CAAC,GAAGL,OAAO,WAAW,EAAE;MACrDc,IAAI;MACJZ,KAAK;MACLC,QAAQ;MACRY;IACJ,CAAC,CAAC;IACFC,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEb,QAAQ,CAACE,IAAI,CAAC,CAAC,CAAC;IAC3D,IAAIF,QAAQ,CAACE,IAAI,CAACC,KAAK,EAAE;MACrBC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEL,QAAQ,CAACE,IAAI,CAACC,KAAK,CAAC;MAClDC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACP,QAAQ,CAACE,IAAI,CAACM,IAAI,CAAC,CAAC;IACpE;IACA,OAAOR,QAAQ,CAACE,IAAI;EACxB,CAAC,CAAC,OAAOY,KAAK,EAAE;IAAA,IAAAC,eAAA;IACZH,OAAO,CAACE,KAAK,CAAC,4BAA4B,EAAE,EAAAC,eAAA,GAAAD,KAAK,CAACd,QAAQ,cAAAe,eAAA,uBAAdA,eAAA,CAAgBb,IAAI,KAAIY,KAAK,CAACE,OAAO,CAAC,CAAC,CAAC;IACpF,MAAMF,KAAK;EACf;AACJ,CAAC;AAED,OAAO,MAAMG,MAAM,GAAGA,CAAA,KAAM;EACxBb,YAAY,CAACc,UAAU,CAAC,OAAO,CAAC;EAChCd,YAAY,CAACc,UAAU,CAAC,MAAM,CAAC;AACnC,CAAC;AAED,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAChC,MAAMC,OAAO,GAAGhB,YAAY,CAACiB,OAAO,CAAC,MAAM,CAAC;EAC5C,IAAID,OAAO,EAAE,OAAOd,IAAI,CAACgB,KAAK,CAACF,OAAO,CAAC;EACvC,OAAO,IAAI;AACf,CAAC;AAED,OAAO,MAAMG,UAAU,GAAGA,CAAA,KAAM;EAC5B,MAAMpB,KAAK,GAAGC,YAAY,CAACiB,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIlB,KAAK,EAAE;IACP,OAAO;MAAEqB,aAAa,EAAE,UAAUrB,KAAK;IAAG,CAAC;EAC/C;EACA,OAAO,CAAC,CAAC;AACb,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}